<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento</title>
</head>
<body>
    <button style="width: 75vw; height: 70vh;" id="checkout-button">Pagar com Stripe</button>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
      const TEST_KEY = 'pk_test_51QL7dYH40HYEkt7KrSCog4qpidBop00Nj8wYTSk8HIlPvoSWonn5FebisZkqCYn8QjYvCoDAgqQIMzQdHF3huyqr00kYLsDV9B';
      const BASE_URL = 'http://localhost:5000'
      const stripe = Stripe(TEST_KEY);
    
      document.getElementById("checkout-button").addEventListener("click", async () => {
        try {
          const response = await fetch(`${BASE_URL}/create-checkout-session`, { 
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
          });
    
          if (!response.ok) {
            throw new Error("Falha ao criar sess√£o de checkout");
          }
    
          const { id } = await response.json();
    
          const result = await stripe.redirectToCheckout({
            sessionId: id,
          });
    
          if (result.error) {
            console.error(result.error.message);
          }
        } catch (error) {
          console.error("Erro durante o redirecionamento:", error);
        }
      });
    </script>
</body>
</html>
